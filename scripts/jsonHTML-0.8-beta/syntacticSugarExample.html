<!--
    This example produces similar html as what is in example.html, but quite possibly could be more difficult 
    to understand. One thing to notice here, is that this code is utilizing the more advanced features of jsonHTML,
    and is written in a more functional programming way. Notice how in order to manipulate the json objects in
    a more functional programming style, you have to call $jConstruct, as it will construct an object for you to
    easily manipulate with fascinating, and epic techniques. Of course, there is function chaining!
    
    To some, this style may be more practical as it may provide a better learning curve. Utilizing jsonHTML in this 
    way, does seem to open the doors to creativity and code reuse for future projects.
    
    Have Fun!
-->

<html>
    <head>
        <title>jsonHTML EXAMPLE!</title>
        <script type='text/javascript' src='http://code.jquery.com/jquery-1.10.2.min.js'></script> <!--MAKE SURE TO INCLUDE JQUERY!!-->
        <script type='text/javascript' src='jsonHTML.js'></script>
        <script>
            var centerBorderHalf = { //css to reuse in each object, or you can put this in a .css file!
                'width': '50%',
                'border': '1px solid black',
                'border-radius': '15px',
                'text-align': 'center',
                'margin': '0 auto',
            };
            
            var child0 = function () {
                return $jConstruct('div', {
                    //id: 'thisISDivStuffChild0', //notice how if this object is not later manipulated in code, I can simply ignore adding an ID, jsonHTML will make one on its own!
                    text: 'Hello World From Child 0',
                }).css(centerBorderHalf);
            };
            
            //do this when div looses focus.
            var mutableDivOnBlur = function (mDiv, data) {
                mDiv.event('blur', function() { //when you click away from the textbox, it goes back to a div!
                    var txt = $('#'+mDiv.id)[0].value;
                    mDiv.remove();
                    mDiv.text = txt;
                    mDiv.textProperties('bold').css({
                        'color': 'purple',
                    }).appendTo('#thisIsDivStuff'+data.indx); // I can just grab the original mDiv, by its ID, and re-append it, beautiful like recursion!
                }); 
            }
            
            //do this when div is clicked. this is what makes a mutable div... mutate.
            var mutableDivOnClick = function(mDiv, data) {
                mDiv.event('click', function() { //mutate my div into a textbox on the click!
                    mDiv.remove(); //remove the old
                    $jConstruct('textbox', {
                        id: mDiv.id,
                        text: 'Change the text!', //text that will display in the text box.
                    }).css({
                        'color': 'purple', //color of the text in the text box.
                    }).appendTo('#thisIsDivStuff'+data.indx).done(function () {
                        mutableDivOnBlur(mDiv, data);
                        mDiv.event('focus');
                    }); //on click append my object to this div id!
                });
            }
            
            //here is where it gets crazy... this is a mutable div!
            var mutableDiv = function(data) { 
                var mDiv = $jConstruct('div', { //this var is reused, make sure that it stays in memory by declaring it as var.
                    //id: 'thisIsDivStuffChild1',
                    text: 'Hello World From Child 1 <-- Click Me!',
                }).css(centerBorderHalf).addFunction(function() {
                    mutableDivOnClick(mDiv, data);
                });
                return mDiv;
            };
            
            var jsonHTMLObj = function(data) {
                return $jConstruct('div', {
                    id: 'thisIsDivStuff' + data.indx,
                    class: 'divStuff', //yea, you can set a class and add css in an external style sheet!
                    text: 'HELLO WORLD!',
                }).textProperties('heading', '2').css(centerBorderHalf).addChild(child0).addChild(mutableDiv(data)); //add text styling, css and a child object with chaining!
            };

            $(document).ready(function () {
                jsonHTMLObj({indx: 1}).appendTo('body'); //now just append it to any div!
            });
            
        </script>
    </head>
        <body></body>
</html>

<!--
    Disclaimer: jsonHTML is provided to you as Free Software (refer to: gnu.org/philosophy/free-sw.html ), 
    by using this code you agree not to hold me responsible for any damages, or consequences of your 
    malicious or "friendly" use of this code. This code is provided with no warranties, or guarantees, 
    all I ask is you retain credit back to me if you use my code.
    
            )
            
            (
        )   )
        (
    .---------------------.
    |       _____         |___      
    |     .'`_,-._`'.      __ \
    |    /  ( [ ] )  \    |  ||
    |   /.-""`( )`""-.\   |  ||
    |  ' <'```(.)```'> '  | _||
    |    <'```(.)```'>    |/ _/
    |     <'``(.)``'>      ./
    |      <``\_/``>      |
    |       `'---'`       |
    \github.com/trillobite/              Keep it black.
      \_________________/  
-->
